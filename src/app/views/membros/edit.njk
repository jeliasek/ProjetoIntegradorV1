{% extends "layout.njk" %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/alertify.min.css" integrity="sha512-IXuoq1aFd2wXs4NqGskwX2Vb+I8UJ+tGJEu/Dc0zwLNKeQ7CW3Sr6v0yU3z5OQWe3eScVIkER4J9L7byrgR/fA==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/css/themes/default.min.css" integrity="sha512-RgUjDpwjEDzAb7nkShizCCJ+QTSLIiJO1ldtuxzs0UIBRH4QpOjUU9w47AF9ZlviqV/dOFGWF6o7l3lttEFb6g==" crossorigin="anonymous" />

<div class="card">
    <section 
        class="avatar" 
        style="background: url({{ membro.foto }}) no-repeat center center / cover"></section>
    <section class="details">
        <form method="POST" action="/membros?_method=PUT">
                <h3>Editar Membro</h3>

                {% include 'membros/fieldsUpdate.njk' %}
                <input type="hidden" name="id" value={{membro.id}}>
        
        </form>

        <form id="form-delete" action="/membros?_method=DELETE" method='POST'>
            <input type="hidden" name="id" value={{membro.id}}>
            <button type='submit'>Deletar</button>

        </form>

        <script>
            alertify.alert('Ready!')
            const formDelete = document.querySelector("#form-delete")
            formDelete.addEventListener('submit', function(event){
                const confirmation = confirm(`Confirma exclus√£o dos dados? {{membro.id}}`)
                if(!confirmation){
                    event.preventDefault()
                }
            })

        </script>
        
    </section>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/AlertifyJS/1.13.1/alertify.min.js" integrity="sha512-JnjG+Wt53GspUQXQhc+c4j8SBERsgJAoHeehagKHlxQN+MtCCmFDghX9/AcbkkNRZptyZU4zC8utK59M5L45Iw==" crossorigin="anonymous"></script>
<script>
    console.log("laalalla")
    if('{{error}}' != ""){
        alertify.alert('{{error}}')
    }
</script>
{% endblock content %}